<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="Content-Security-Policy" content="default-src * data:; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
  <script src="components/loader.js"></script>
  <script src="lib/angular/angular.min.js"></script>
  <script src="lib/onsenui/js/onsenui.min.js"></script>
  <script src="lib/onsenui/js/angular-onsenui.min.js"></script>

  <link rel="stylesheet" href="components/loader.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="lib/onsenui/css/onsen-css-components.css">
  <link rel="stylesheet" href="css/style.css">

  <script>
    ons.bootstrap()
      
      .controller('QRCodeController', function() {
          var cntrll = this ; 
          
         cntrll.dataCode='';
         cntrll.errorsTxt='';
         
         this.readQRCode=function(){
             cntrll.errorsTxt='';
              
             window.plugins.barcodeScanner.scan( function(result) {
                 
                    alert("We got a barcode\n" +
                              "Result: " + result.text + "\n" +
                              "Format: " + result.format + "\n" +
                              "Cancelled: " + result.cancelled);
                              
                }, function(error) {
                    cntrll.errorsTxt=error;
                }
             );
         }
      });
      
    ons.ready(function() {
      
    });
  </script>
</head>
<body>
  <ons-page ng-controller="QRCodeController as qrc">
    
    <ons-toolbar>
      <div class="center">QRCode Reader</div>
    </ons-toolbar>
    
    
    <div class="content" style="margin: 10px;">
      
      <ons-button ng-click="qrc.readQRCode()">
       Прочитать
      </ons-button>

      <p>
        Данные QRCode {{ qrc.dataCode }}
      </p>
      <p ng-show='qrc.errorsTxt.length>0'>
        ошибка: {{ qrc.errorsTxt }}
      </p>
   
    </div>
  </ons-page>
</body>
</html>
